{% extends "base.j2" %}

{% set page_title = 'Analysis' %}


{% block header %}
    <a href="{{ url('analysis_create') }}" class="btn btn-success" style="float: right">Create</a>
    {{ super() }}
{% endblock %}


{% block content %}
    <div class="datatable-wrap">
        {{ datatable|safe }}
    </div>
{% endblock %}


{% block script %}
    <link rel="stylesheet" href="{{ static('homer/vendor/datatables_plugins/integration/bootstrap/3/dataTables.bootstrap.css') }}" />

    <script src="{{ static('homer/vendor/datatables/media/js/jquery.dataTables.min.js') }}"></script>
    <script src="{{ static('homer/vendor/datatables_plugins/integration/bootstrap/3/dataTables.bootstrap.min.js')    }}"></script>

    <script src="{{ static('js/datatableview.js') }}"></script>
    <script type="text/javascript">
        datatableview.auto_initialize = false;
        $(function(){
            datatableview.initialize($('.datatable'), {
                columnDefs: [
                    {
                        render: function ( data, type, row ) {
                            console.log(row)
                            return '<a href="/analysis/' + row[0] + '/">' + data + '</a>';
                        },
                        targets: [1]
                    }
                ]
            });
        });
    </script>
{% endblock %}
